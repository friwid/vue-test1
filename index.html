<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>bmgame</title>
    <link rel="stylesheet" href="node_modules/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="style.css">
    <script src="node_modules/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="script.js"></script>

</head>
<body>

  <header>
    <navbar 
      :pages="pages"
      :active-page="activePage"
      :nav-link-click="(index) => activePage = index"
    ></navbar>
  </header>

  <main>
    <page-viewer 
      :page="pages[activePage]"
    ></page-viewer>
  </main> 

  <footer>

  </footer>

  <script>
      let app = Vue.createApp({
        /**
         * Initializes the data for the Vue instance.
         * @returns {Object} An object containing the initial data.
         * @property {number} activePage - The index of the active page.
         * @property {string} theme - The current color theme of the webpage.
         * @property {string} themeSwitch - The color theme to switch to.
         * @property {Array} pages - An array of page objects. Each page object contains a link (with text and URL), a page title, and content.
         */
        data() {
            return {
              activePage: 0,
              pages: [
                {
                  pageLink: {linkText: 'Home', linkUrl: 'index.html'},
                  pageTitle: 'Welcome, Player!',
                  pageContent: 'Conquer the world.'
                },
                {
                  pageLink: {linkText: 'Register', linkUrl: 'register.html'},
                  pageTitle: 'Create an account!',
                  pageContent: '[Register form]'
                },
                {
                  pageLink: {linkText: 'Login', linkUrl: 'login.html'},
                  pageTitle: 'Login to start conquering!',
                  pageContent: '[Login form]'
                }

              ]
            };
        }
      });

      app.component('navbar', {
        props: ['pages', 'activePage', 'navLinkClick'],
        template: `
        <nav 
        :class="[\`navbar-\${theme}\`, \`bg-\${theme}\`, 'navbar', 'navbar-expand-lg']"
        >
          <div class="container-fluid">
            <a class="navbar-brand" href="#">bgame</a>
            <button 
            class="navbar-toggler" 
            type="button" 
            data-bs-toggle="collapse" 
            data-bs-target="#navbarNavDropdown" 
            ria-controls="navbarNavDropdown" 
            aria-expanded="false" 
            aria-label="Toggle navigation"
            >
              <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavDropdown">
              <ul class="navbar-nav">
                <li v-for="(page, index) in pages" class="nav-item" :key="index">
                  <a 
                    class="nav-link" 
                    :class="{active: activePage == index}"
                    :href="page.pageLink.linkUrl" 
                    :title="page.pageLink.linkText"
                    @click.prevent="navLinkClick(index)"
                    >{{ page.pageLink.linkText }}</a>
                </li>
              </ul>
              <div class="form-check form-switch">
                <input 
                class="form-check-input" 
                type="checkbox" 
                role="switch" 
                id="theme" 
                @click="changeTheme()" 
                checked
                >
                <label :class="\`text-\${themeSwitch}\`" for="theme">Go {{ themeSwitch }}</label>
              </div> 
            </div>
          </div>
        </nav>
        `,
        data() {
          return {
            theme: 'light',
            themeSwitch: 'dark'
          }
        },
        methods: {
          /**
           * Switches the theme of the webpage between 'light' and 'dark'.
           * @returns {void} No return value
           */
          changeTheme() {
            let theme = 'light';
            let themeSwitch = 'dark';

            if (this.theme == 'light') {
              theme = 'dark';
              themeSwitch = 'light';
            }

            this.theme = theme;
            this.themeSwitch = themeSwitch;
          }
        }
      });

      app.component('page-viewer', {
        props: ['page'],
        template: `
          <div class="container">
            <h1>{{ page.pageTitle }}</h1>
            <p>{{ page.pageContent }}</p>
          </div>   
        `
      });    

      app.mount('body');
  </script>

</body>
</html>